<link href="../polymer/polymer.html" rel="import">

<!--
Twitter Button element

@element social-twitter-button
@demo https://aoisensi.github.io/social-twitter-button/demo-lite.html
-->
<polymer-element name="social-twitter-button" attributes="text url hashtags via related size align count counturl lang dnt width height">
  <template>
    <iframe src="{{src}}" style="border: 0; overflow: hidden; width: {{width}}px; height: {{height}}px;"></iframe>
    <style>
      iframe {
        width: "{{width}}px";
        height: "{{height}}px";
      }
    </style>
  </template>
  <script>
    Polymer('social-twitter-button', {
      text: null,
      url: null,
      hashtags: null,
      via: null,
      related: null,
      size: null,
      align: null,
      count: null,
      counturl: null,
      lang: null,
      dnt: null,

      width: 140,
      height: 28,

      src: '',
      ready: function() {
        this.update();
      },

      update: function() {
        var args = ['text', 'url', 'hashtags', 'via', 'related', 'size', 'align', 'count', 'counturl', 'lang', 'dnt'];
        var src = 'https://platform.twitter.com/widgets/tweet_button.html?';
        for (var i in args) {
          var arg = args[i];
          var attr = this.getAttribute(arg);
          if (attr) {
            src += arg + '=' + encodeURIComponent(attr) + '&'
          }
        };
        this.src = src;
      }
    });
  </script>
</polymer-element>
